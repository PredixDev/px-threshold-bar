{"version":3,"sources":["ev-threshold-bar.es6.js"],"names":["Polymer","is","properties","min","type","Number","value","max","reversed","Boolean","config","Array","uom","String","_scaleFactor","observers","_getStyles","width","order","length","color","_scaleDataChanged","thresholdEl","dom","root","querySelector","_checkValuesSet","clientWidth","factor","set","setTimeout","bind","_configDataChanged","configLen","sort","a","b","i","_getMarkerLineStyle","position","_getMarkerStyle","_getValueStyle","spanEl","style","display","spanSize","includeValue","undefined"],"mappings":"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","file":"ev-threshold-bar.js","sourcesContent":["(function() {\n  Polymer({\n\n    is: 'ev-threshold-bar',\n\n    properties: {\n\n      /**\n       * Holds the min value for the threshold bar.\n       *\n       * @property\n       */\n      min: {\n        type: Number,\n        value: 0\n      },\n\n      /**\n       * Holds the max value for the threshold bar.\n       *\n       * @property\n       */\n      max: {\n        type: Number,\n        value: 100\n      },\n\n      /**\n       * Reverse the bar orientation.\n       *\n       * @property\n       */\n      reversed: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Holds the thresholds configuration.\n       * The configuration should be an array of Objects with the following structure:\n       * {\n       *   min: <A number representing the begining of the threshold>,\n       *   max: <A number representing the end of the threshold>,\n       *   color: <A valid color for this specific bar (Hex / RGB)>\n       * }\n       */\n      config: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      /**\n       * The current value to be displayed on top of the threshold bar.\n       * If this property is null a value won't be show but the threshold bar will still be displayed.\n       *\n       * @property\n       */\n      value: {\n        type: Number,\n        value: null\n      },\n\n      /**\n       * The unit of measure for the value, if any.\n       *\n       * @property\n       */\n      uom: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * Holds the (pixel / range) scale factor used to calculate the threshold bars and value positioning.\n       *\n       * @property\n       * @private\n       */\n      _scaleFactor: {\n        type: Number,\n        value: null\n      }\n    },\n\n    observers: [\n      '_configDataChanged(config)',\n      '_scaleDataChanged(min)',\n      '_scaleDataChanged(max)'\n    ],\n\n    /**\n     * Calculates the width of the specific threshold bars.\n     *\n     * @param config - The threshold configuration Object\n     * @return {string} - The style string\n     * @private\n     */\n    _getStyles: function (config) {\n      let width = ((config.max - config.min) * this._scaleFactor),\n          order = this.reversed ? this.config.length - config.order : config.order;\n\n      return 'width: ' + width + 'px; ' + 'background-color: ' + config.color + '; ' + 'order: ' + order + ';';\n    },\n\n    /**\n     * Observer that calculates the scale factor when the extremes of the threshold bar are changed.\n     *\n     * @private\n     */\n    _scaleDataChanged: function () {\n      let thresholdEl = Polymer.dom(this.root).querySelector('.threshold-bar-container');\n\n      if (this._checkValuesSet(false)) {\n        if (thresholdEl && thresholdEl.clientWidth) {\n          let factor = (thresholdEl.clientWidth / (this.max - this.min));\n\n          this.set('_scaleFactor', factor);\n        }\n        else {\n          setTimeout(function() {\n            this._scaleDataChanged();\n          }.bind(this), 100)\n        }\n      }\n    },\n\n    /**\n     * Observer that orders the threshold configuration based on the min property.\n     *\n     * @param config - The list of threshold configurations\n     * @private\n     */\n    _configDataChanged(config) {\n      if (config && config.length) {\n        let configLen = config.length;\n\n        config.sort(function (a, b) {\n          return a.min - b.min;\n        });\n\n        for (let i = 0; i < configLen; i++) {\n          config[i]['order'] = i;\n        }\n      }\n    },\n\n    /**\n     * Calculates the position of the Marker Line in the threshold bar\n     *\n     * @return {string} - The style string\n     * @private\n     */\n    _getMarkerLineStyle: function () {\n      if (this._checkValuesSet(true) && this._scaleFactor) {\n        let position = Number(this.value);\n\n        position = position > this.max ? this.max : position;\n        position = position < this.min ? this.min : position;\n        position = position * this._scaleFactor;\n\n        return 'left: ' + position + 'px;';\n      }\n\n      return '';\n    },\n\n    /**\n     * Calculates the position of the Marker Icon in the threshold bar\n     *\n     * @return {string} - The style string\n     * @private\n     */\n    _getMarkerStyle: function () {\n      if (this._checkValuesSet(true) && this._scaleFactor) {\n        let position = Number(this.value);\n\n        position = position > this.max ? this.max : position;\n        position = position < this.min ? this.min : position;\n        position = (position * this._scaleFactor) - 4;\n\n        return 'left: ' + position + 'px;';\n      }\n\n      return 'display: none;';\n    },\n\n    /**\n     * Calculates the position of the value label in the threshold bar\n     *\n     * @return {string} - The style string\n     * @private\n     */\n    _getValueStyle: function () {\n      let spanEl = Polymer.dom(this.root).querySelector('.threshold-bar-value > span');\n\n      spanEl.style.display = 'block';\n\n      if (this._checkValuesSet(true) && this._scaleFactor) {\n        let position = Number(this.value),\n            spanSize = spanEl.clientWidth;\n\n        position = position > this.max ? this.max : position;\n        position = position < this.min ? this.min : position;\n        position = (position * this._scaleFactor) - spanSize + 4;\n        position = position < 0 ? ((Number(this.value) * this._scaleFactor) - 4) : position;\n\n        return 'left: ' + position + 'px;';\n      }\n\n      return 'display: none;';\n    },\n\n    /**\n     * Verifies that values were set for the base properties min, max and value.\n     *\n     * @param includeValue - Includes the property value in the check\n     * @return {boolean} - Whether the values were set or not\n     * @private\n     */\n    _checkValuesSet: function(includeValue) {\n      let min = this.min !== null && this.min !== undefined,\n          max = this.max !== null && this.max !== undefined,\n          value = this.value !== null && this.value !== undefined;\n\n      return includeValue ? min && max && value : min && max;\n    }\n  });\n})();\n"]}